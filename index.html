<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Streamflow</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="top-bar">
    <div class="top-left">
      <h1>Streamflow</h1>
      <span id="today-label"></span>
    </div>
    <button id="dark-toggle" class="icon-btn" aria-label="Toggle dark mode">ðŸŒ“</button>
  </header>

  <main>
    <section class="calendar-bar">
      <div id="week-row"></div>
    </section>

    <section class="toolbar">
      <button id="add-btn" class="primary-btn">Add</button>
      <button id="skip-btn" class="ghost-btn">Skip</button>
      <button id="hide-btn" class="ghost-btn">Hide</button>
      <button id="reset-btn" class="ghost-btn">Reset</button>
      <span id="summary-label" class="summary-label"></span>
    </section>

    <section id="habit-list" class="habit-list"></section>
  </main>

  <!-- Habit modal -->
  <div id="habit-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <header class="modal-header">
        <h2 id="modal-title">New habit</h2>
        <button id="close-modal" class="icon-btn">âœ•</button>
      </header>

      <div class="modal-body">
        <div class="field">
          <span>Title</span>
          <input id="fTitle" type="text" placeholder="e.g. Drink water" />
        </div>

        <div class="field">
          <span>Emoji</span>
          <input id="fEmoji" type="text" maxlength="2" placeholder="ðŸ’§" />
        </div>

        <div class="field">
          <span>Goal (units per day)</span>
          <input id="fGoal" type="number" min="1" value="3" />
        </div>

        <div class="field">
          <span>Start date</span>
          <input id="fStart" type="date" />
        </div>

        <div class="field">
          <span>Days</span>
          <div class="chip-row" id="days-row">
            <button data-day="1" class="chip chip-active">Mo</button>
            <button data-day="2" class="chip chip-active">Tu</button>
            <button data-day="3" class="chip chip-active">We</button>
            <button data-day="4" class="chip chip-active">Th</button>
            <button data-day="5" class="chip chip-active">Fr</button>
            <button data-day="6" class="chip chip-active">Sa</button>
            <button data-day="0" class="chip chip-active">Su</button>
          </div>
        </div>

        <div class="field">
          <span>Time range</span>
          <div class="chip-row" id="time-range-row">
            <button data-range="anytime" class="chip chip-active">Anytime</button>
            <button data-range="morning" class="chip">Morning</button>
            <button data-range="afternoon" class="chip">Afternoon</button>
            <button data-range="evening" class="chip">Evening</button>
            <button data-range="custom" class="chip">Custom</button>
          </div>
          <div id="custom-time-wrapper" style="display:none; margin-top:8px;">
            <input type="time" id="fReminderTime" />
          </div>
        </div>

        <div class="field">
          <span>Type</span>
          <div class="chip-row" id="type-row">
            <button data-type="build" class="chip chip-active">Build</button>
            <button data-type="quit" class="chip">Quit</button>
          </div>
        </div>
      </div>

      <footer class="modal-footer">
        <button id="delete-btn" class="danger-btn hidden">Delete</button>
        <div class="spacer"></div>
        <button id="cancel-btn" class="ghost-btn">Cancel</button>
        <button id="save-btn" class="primary-btn">Save</button>
      </footer>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>
</body>
</html>
